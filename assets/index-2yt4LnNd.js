(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function p(e){return typeof window<"u"&&window.location.hostname==="itsecretary-map.github.io"?`/chromecast_stream/images/slideshow/${e}`:`./images/slideshow/${e}`}const D=[{ar:"إِنَّ الصَّلَاةَ تَنْهَىٰ عَنِ الْفَحْشَاءِ وَالْمُنكَرِ",en:"Indeed, prayer prohibits immorality and wrongdoing. (Quran 29:45)"},{ar:"وَمَا خَلَقْتُ الْجِنَّ وَالْإِنسَ إِلَّا لِيَعْبُدُونِ",en:"I did not create the jinn and mankind except to worship Me. (Quran 51:56)"},{ar:"فَاذْكُرُونِي أَذْكُرْكُمْ",en:"So remember Me; I will remember you. (Quran 2:152)"},{ar:"وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ",en:"And whoever puts his trust in Allah, then He will suffice him. (Quran 65:3)"},{ar:"إِنَّ اللَّهَ مَعَ الصَّابِرِينَ",en:"Indeed, Allah is with the patient. (Quran 2:153)"},{ar:"وَلَا تَيْأَسُوا مِن رَّوْحِ اللَّهِ",en:"And never give up hope of Allah's mercy. (Quran 12:87)"},{ar:"إِنَّ اللَّهَ لَا يُضِيعُ أَجْرَ الْمُحْسِنِينَ",en:"Indeed, Allah does not allow the reward of the doers of good to be lost. (Quran 9:120)"},{ar:"وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا",en:"And whoever fears Allah, He will make for him a way out. (Quran 65:2)"},{ar:"إِنَّمَا الْمُؤْمِنُونَ إِخْوَةٌ",en:"The believers are but brothers. (Quran 49:10)"},{ar:"لَا يُؤْمِنُ أَحَدُكُمْ حَتَّى يُحِبَّ لأَخِيهِ مَا يُحِبُّ لِنَفْسِهِ",en:"None of you truly believes until he loves for his brother what he loves for himself. (Bukhari & Muslim)"},{ar:"خَيْرُكُمْ أَحْسَنُكُمْ أَخْلَاقًا",en:"The best among you are those who have the best manners and character. (Bukhari)"},{ar:"مَنْ لَا يَشْكُرِ النَّاسَ لَا يَشْكُرِ اللَّهَ",en:"Whoever does not thank people has not thanked Allah. (Tirmidhi)"},{ar:"لَيْسَ الشَّدِيدُ بِالصُّرَعَةِ، إِنَّمَا الشَّدِيدُ الَّذِي يَمْلِكُ نَفْسَهُ عِندَ الْغَضَبِ",en:"The strong man is not the one who can overpower others. The strong man is the one who controls himself when angry. (Bukhari)"},{ar:"يَسِّرُوا وَلَا تُعَسِّرُوا",en:"Make things easy and do not make them difficult. (Bukhari)"},{ar:"وَلَا تَنَابَزُوا بِالْأَلْقَابِ",en:"And do not insult one another with nicknames. (Quran 49:11)"},{ar:"إِنَّ اللَّهَ يُحِبُّ الْمُحْسِنِينَ",en:"Indeed, Allah loves the doers of good. (Quran 2:195)"},{ar:"اقْرَأْ بِاسْمِ رَبِّكَ الَّذِي خَلَقَ",en:"Read in the name of your Lord who created. (Quran 96:1)"},{ar:"إِنَّ هَٰذَا الْقُرْآنَ يَهْدِي لِلَّتِي هِيَ أَقْوَمُ",en:"Indeed, this Quran guides to that which is most upright. (Quran 17:9)"},{ar:"وَلَقَدْ يَسَّرْنَا الْقُرْآنَ لِلذِّكْرِ",en:"And We have certainly made the Quran easy for remembrance. (Quran 54:17)"},{ar:"إِنَّ الَّذِينَ يَتْلُونَ كِتَابَ اللَّهِ وَأَقَامُوا الصَّلَاةَ",en:"Indeed, those who recite the Book of Allah and establish prayer. (Quran 35:29)"},{ar:"طَلَبُ الْعِلْمِ فَرِيضَةٌ عَلَى كُلِّ مُسْلِمٍ",en:"Seeking knowledge is obligatory upon every Muslim. (Ibn Majah)"},{ar:"مَنْ سَلَكَ طَرِيقًا يَلْتَمِسُ فِيهِ عِلْمًا",en:"Whoever takes a path in search of knowledge. (Abu Dawud)"},{ar:"إِنَّمَا يَخْشَى اللَّهَ مِنْ عِبَادِهِ الْعُلَمَاءُ",en:"Only those of His servants who have knowledge fear Allah. (Quran 35:28)"},{ar:"وَقُل رَّبِّ زِدْنِي عِلْمًا",en:"And say: My Lord, increase me in knowledge. (Quran 20:114)"},{ar:"مَنْ أَحْيَا سُنَّتِي فَقَدْ أَحْيَانِي",en:"Whoever revives my Sunnah has indeed revived me. (Tirmidhi)"},{ar:"مَنْ رَغِبَ عَنْ سُنَّتِي فَلَيْسَ مِنِّي",en:"Whoever turns away from my Sunnah is not from me. (Bukhari & Muslim)"},{ar:"مَنْ أَطَاعَنِي فَقَدْ أَطَاعَ اللَّهَ",en:"Whoever obeys me has obeyed Allah. (Bukhari & Muslim)"},{ar:"مَنْ رَأَى مِنْكُمْ مُنْكَرًا فَلْيُغَيِّرْهُ",en:"Whoever among you sees an evil, let him change it. (Muslim)"},{ar:"لَا يُؤْمِنُ أَحَدُكُمْ حَتَّى أَكُونَ أَحَبَّ إِلَيْهِ",en:"None of you truly believes until I am dearer to him than his father. (Bukhari)"},{ar:"إِنَّ اللَّهَ وَمَلَائِكَتَهُ يُصَلُّونَ عَلَى النَّبِيِّ",en:"Indeed, Allah and His angels send blessings upon the Prophet. (Quran 33:56)"},{ar:"قُلْ إِن كُنتُمْ تُحِبُّونَ اللَّهَ فَاتَّبِعُونِي",en:"Say: If you love Allah, then follow me. (Quran 3:31)"},{ar:"وَمَنْ أَظْلَمُ مِمَّن مَّنَعَ مَسَاجِدَ اللَّهِ أَن يُذْكَرَ فِيهَا اسْمُهُ",en:"And who is more unjust than one who prevents the mention of Allah's name in His mosques? (Quran 2:114)"},{ar:"مَنْ بَنَى مَسْجِدًا لِلَّهِ بَنَى اللَّهُ لَهُ بَيْتًا فِي الْجَنَّةِ",en:"Whoever builds a mosque for Allah, Allah will build for him a house in Paradise. (Bukhari & Muslim)"},{ar:"إِنَّ الْمَسَاجِدَ لِلَّهِ فَلَا تَدْعُوا مَعَ اللَّهِ أَحَدًا",en:"Indeed, the mosques are for Allah, so do not invoke anyone with Allah. (Quran 72:18)"},{ar:"فِي بُيُوتٍ أَذِنَ اللَّهُ أَن تُرْفَعَ وَيُذْكَرَ فِيهَا اسْمُهُ",en:"In houses which Allah has ordered to be raised and in which His name is mentioned. (Quran 24:36)"},{ar:"يَوْمَ تَشْهَدُ عَلَيْهِمْ أَلْسِنَتُهُمْ وَأَيْدِيهِمْ وَأَرْجُلُهُم بِمَا كَانُوا يَعْمَلُونَ",en:"On the Day when their tongues, hands and feet will bear witness against them as to what they used to do. (Quran 24:24)"},{ar:"فَمَن يَعْمَلْ مِثْقَالَ ذَرَّةٍ خَيْرًا يَرَهُ * وَمَن يَعْمَلْ مِثْقَالَ ذَرَّةٍ شَرًّا يَرَهُ",en:"So whoever does an atom's weight of good will see it. And whoever does an atom's weight of evil will see it. (Quran 99:7-8)"},{ar:"يَوْمَ لَا تَمْلِكُ نَفْسٌ لِّنَفْسٍ شَيْئًا",en:"On the Day when no soul will have power to do anything for another soul. (Quran 82:19)"},{ar:"وَكُلُّ إِنسَانٍ أَلْزَمْنَاهُ طَائِرَهُ فِي عُنُقِهِ",en:"And every person's fate We have fastened around his neck. (Quran 17:13)"}];function G(){const e=typeof window<"u"&&(window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/")||window.location.href.includes("github.io"));return console.log("🔍 GitHub Pages detection:",{hostname:window.location.hostname,pathname:window.location.pathname,href:window.location.href,isGitHubPages:e}),e?{mapWebsite:"/chromecast_stream/images/qr-codes/mapitt.png",communityWhatsApp:"/chromecast_stream/images/qr-codes/whatsapp_group.png"}:{mapWebsite:"./images/qr-codes/mapitt.png",communityWhatsApp:"./images/qr-codes/whatsapp_group.png"}}const k={mapWebsite:"Website",communityWhatsApp:"WhatsApp"},v={owner:"itsecretary-map",repo:"chromecast_stream",folder:"images/slideshow",enabled:!0};function O(){const e=window.innerWidth,o=window.innerHeight;console.log(`🔒 Detected screen dimensions: ${e}x${o}`),document.documentElement.style.transform="none",document.body.style.transform="none"}window.addEventListener("load",()=>{console.log("📱 Page loaded, locking viewport dimensions..."),O()});function Q(){const e=window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/"),o=["./CCA_5344-HDR.jpg","CCA_5344-HDR.jpg","/CCA_5344-HDR.jpg","../CCA_5344-HDR.jpg"];e&&(o.unshift("/chromecast_stream/CCA_5344-HDR.jpg"),o.unshift("./chromecast_stream/CCA_5344-HDR.jpg")),console.log("🖼️  Attempting to load background image from multiple paths:",o),console.log("📍 Current page URL:",window.location.href),console.log("📁 Current page pathname:",window.location.pathname);let n=0;const t=new Image;t.onload=()=>{console.log("✅ Background image loaded successfully:",t.src),console.log("📏 Image dimensions:",t.naturalWidth,"x",t.naturalHeight),console.log("💾 Image size:",(t.naturalWidth*t.naturalHeight*4/1024/1024).toFixed(2),"MB (estimated)"),document.body.style.setProperty("background-image",`url('${t.src}')`),document.body.style.setProperty("background-size","cover"),document.body.style.setProperty("background-position","center center"),document.body.style.setProperty("background-attachment","fixed"),document.body.style.setProperty("background-repeat","no-repeat"),console.log("🎨 Background image applied to body element")},t.onerror=()=>{if(console.error(`❌ Failed to load background image from path ${n+1}/${o.length}:`,o[n]),n++,n<o.length){const a=o[n];console.log(`🔄 Trying next path (${n+1}/${o.length}):`,a),t.src=a}else console.error("❌ All paths failed. Background image could not be loaded."),console.log("🎨 Keeping CSS gradient background as fallback")},console.log(`🚀 Starting with path: ${o[0]}`),t.src=o[0],fetch(o[0]).then(a=>{a.ok?console.log("✅ Fetch API confirms image is accessible:",o[0]):console.error("❌ Fetch API failed:",a.status,a.statusText)}).catch(a=>{console.error("❌ Fetch API error:",a)})}let l=[];function j(e){console.log("🔄 Preloading images to prevent layout shifts..."),e.forEach((o,n)=>{const t=new Image;t.onload=()=>{console.log(`✅ Preloaded image ${n+1}/${e.length}:`,o)},t.onerror=()=>{console.warn(`⚠️ Failed to preload image ${n+1}:`,o)},t.src=o})}const w="github_images_cache",S=1440*60*1e3;async function U(){try{const e=localStorage.getItem(w);if(e){const n=JSON.parse(e),t=Date.now();if(t-n.timestamp<S)return console.log("📦 Using cached GitHub images (age:",Math.round((t-n.timestamp)/1e3/60),"minutes)"),n.images;console.log("⏰ Cache expired, fetching fresh images from GitHub")}const o=await N();if(o.length>0){const n={images:o,timestamp:Date.now()};localStorage.setItem(w,JSON.stringify(n)),console.log("💾 Cached fresh GitHub images")}return o}catch(e){console.error("❌ Error in cache management:",e);const o=localStorage.getItem(w);if(o){const n=JSON.parse(o);return console.log("🔄 Using expired cache as fallback"),n.images}return[]}}async function N(){try{const e=`https://api.github.com/repos/${v.owner}/${v.repo}/contents/${v.folder}`;console.log("Fetching images from GitHub:",e);const o=await fetch(e);if(!o.ok){if(o.status===404)return console.warn("⚠️ GitHub folder not found:",e),console.log("This is expected if the folder is empty or doesn't exist"),[];throw new Error(`GitHub API error: ${o.status} ${o.statusText}`)}const n=await o.json();console.log("GitHub API response:",n),console.log("📁 All files returned from GitHub:",n.map(s=>s.name));const t=n.filter(s=>{const c=s.name.toLowerCase().split(".").pop(),r=["jpg","jpeg","png","gif","webp"].includes(c),g=!s.name.includes("CCA_5344-HDR");return console.log(`🔍 File: ${s.name}, isImage: ${r}, isNotBackground: ${g}`),r&&g});console.log(`✅ Found ${t.length} valid slideshow image files:`,t);const a=t.map(s=>({id:s.sha,name:s.name,url:s.download_url}));return console.log("GitHub images processed:",a),a}catch(e){return console.error("Error fetching GitHub images:",e),console.log("Falling back to default slideshow images"),[]}}const x="local_images_cache",q="1.0";function F(){localStorage.removeItem(w),localStorage.removeItem(x),console.log("🗑️ Image cache cleared")}function V(){const e=localStorage.getItem(w);if(e){const o=JSON.parse(e),n=Math.round((Date.now()-o.timestamp)/1e3/60),t=Math.round((S-(Date.now()-o.timestamp))/1e3/60);return console.log("📊 Cache Info:",{age:n+" minutes",expiresIn:t+" minutes",imageCount:o.images.length}),{age:n,expiresIn:t,imageCount:o.images.length}}else return console.log("📊 No cache found"),null}function _(){try{const e=localStorage.getItem(x);if(e){const o=JSON.parse(e);return o.version===q?(console.log("✅ Local image cache is valid"),o.images):(console.log("🔄 Local image cache version mismatch, clearing..."),F(),null)}return null}catch(e){return console.error("Error reading local image cache:",e),null}}function A(e){try{const o={version:q,timestamp:Date.now(),images:e};localStorage.setItem(x,JSON.stringify(o)),console.log("💾 Local image cache updated with",e.length,"images")}catch(o){console.error("Error setting local image cache:",o)}}function z(){const e=_();if(e&&e.length>0)return console.log("📱 Using cached local images:",e.length),e;const o=P();return console.log("📱 Using fallback images:",o.length),A(o),j(o),o}function J(){if(window.location.hostname==="localhost"||window.location.hostname.includes("github.io")||window.innerWidth>=1920||window.innerHeight>=1080){console.log("📺 Chromecast Receiver Mode Detected"),console.log("  - Screen size:",window.innerWidth,"x",window.innerHeight),console.log("  - Hostname:",window.location.hostname),K();const o=document.querySelector(".chromecast-controls");o&&(o.style.display="none",console.log("🎯 Hidden Chromecast sender controls for receiver mode"))}else console.log("💻 Sender Mode Detected (showing cast controls)")}function K(){const e=document.body;e.style.fontSize=window.innerWidth>=3840?"32px":"24px";const o=document.querySelector(".slideshow img");o&&(o.style.borderRadius="16px",o.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.6)"),console.log("🎨 TV display optimizations applied (CSS-preserving)")}function W(){const e=window.innerWidth/window.innerHeight;window.innerWidth>=1920&&(console.log(`TV detected: ${window.innerWidth}x${window.innerHeight}, aspect ratio: ${e.toFixed(2)}`),e<=16/9?(document.documentElement.style.setProperty("--header-height","10vh"),document.documentElement.style.setProperty("--ayats-height","10vh"),document.documentElement.style.setProperty("--content-height","70vh"),document.documentElement.style.setProperty("--gap","2vh"),document.documentElement.style.setProperty("--padding","2vh"),console.log("Applied 16:9 TV optimization (percentage-based layout)")):(document.documentElement.style.setProperty("--header-height","8vh"),document.documentElement.style.setProperty("--ayats-height","8vh"),document.documentElement.style.setProperty("--content-height","74vh"),document.documentElement.style.setProperty("--gap","2vh"),document.documentElement.style.setProperty("--padding","2vh"),console.log("Applied ultra-wide TV optimization (percentage-based layout)")))}window.addEventListener("load",W);window.addEventListener("resize",W);let d=0;const f=document.getElementById("slideshow-img");let R=0;function y(e){if(l.length===0){console.log("No images available to show");return}console.log(`Showing image ${e+1} of ${l.length}:`,l[e]),f.style.opacity=0;let o=document.getElementById("slideshow-error");o&&o.remove(),setTimeout(()=>{const n=l[e];console.log("Setting image src to:",n),f.src=n,f.onload=()=>{console.log("Image loaded successfully:",n),f.style.opacity=1},f.onerror=()=>{if(console.error("Image failed to load:",n),f.style.opacity=.2,!document.getElementById("slideshow-error")){const t=document.createElement("div");t.id="slideshow-error",t.style.color="red",t.style.textAlign="center",t.style.marginTop="10px",t.textContent="Image failed to load. Check the image URL or try another image.",f.parentNode.appendChild(t)}}},300)}function Y(){l.length!==0&&(d===l.length-1&&(R++,console.log(`🔄 Completed rotation ${R} through ${l.length} images`),Z()),d=(d+1)%l.length,y(d))}async function Z(){console.log("🔄 Refreshing slideshow images after completing rotation...");try{F();const e=await N();if(e.length>0){const o=l.length;l=e.map(n=>n.url),console.log(`✅ Refreshed slideshow: ${o} → ${l.length} images`),d=0,y(d),l.length>o&&console.log(`🎉 Found ${l.length-o} new images!`)}else console.log("⚠️ No fresh images found, keeping current set")}catch(e){console.error("❌ Error refreshing images after rotation:",e),console.log("🔄 Continuing with current image set")}}async function X(){try{console.log("Initializing slideshow with smart local caching...");let e=z();if(e&&e.length>0){l=e,console.log(`✅ Using ${l.length} cached local images`),d=0,y(d);return}console.log("🔄 No local cache, trying GitHub API...");try{const o=await U();if(o.length>0){l=o.map(n=>n.url),console.log(`✅ Got ${l.length} images from GitHub`),A(l),d=0,y(d);return}}catch{console.log("⚠️ GitHub API failed, using fallback images")}l=P(),l.length>0&&(console.log(`📱 Using ${l.length} fallback images`),A(l),d=0,y(d))}catch(e){console.error("Error initializing slideshow:",e),l=P(),l.length>0&&(d=0,y(d))}}setInterval(Y,8e3);function P(){return[p("imam_schedule.jpg"),p("sundayschool.jpg"),p("fall retreat.jpg"),p("hajj dinner.jpg"),p("membership drive.jpg"),p("ping pong.jpg"),p("winter fundraiser.jpg")]}const H=document.getElementById("ayats-content");let C=0;function T(e){if(H){const n=D[e].en.replace(/[.]+(?=\s*\()/,"");H.innerHTML=`<div style="font-size:1rem;text-align:center;color:white;line-height:1.4;padding:15px;background:rgba(255,255,255,0.1);border-radius:8px;border-left:4px solid #2196F3;">${n}</div>`}}H&&(T(C),setInterval(()=>{C=(C+1)%D.length,T(C)},2e4));function L(){console.log("🕌 Rendering prayer times..."),console.log("🔍 DOM ready state:",document.readyState),console.log("🔍 Current URL:",window.location.href);const e=document.getElementById("prayer-times-list");if(console.log("🔍 Prayer list element search result:",e),!e){console.error("❌ Prayer times list element not found!"),console.error('🔍 Available elements with "prayer" in class or id:'),document.querySelectorAll("*").forEach(t=>{(t.className&&t.className.includes("prayer")||t.id&&t.id.includes("prayer"))&&console.log("  - Found:",t.tagName,"class:",t.className,"id:",t.id)});return}console.log("✅ Found prayer times list element:",e),console.log("🔍 Prayer list current HTML:",e.innerHTML),console.log("🔍 Prayer list parent element:",e.parentElement),e.innerHTML="",console.log("🔍 Cleared prayer list HTML");const o="15044",n="US";console.log("🌐 Fetching prayer times from API..."),fetch(`https://api.aladhan.com/v1/timingsByAddress?address=${o},${n}`).then(t=>(console.log("📡 API response status:",t.status,t.statusText),t.json())).then(t=>{console.log("✅ Prayer times API response:",t);const a=t.data.timings,s=["Fajr","Dhuhr","Asr","Maghrib","Isha"];console.log("📝 Processing prayer times..."),s.forEach(r=>{let g=a[r];if(g){let[I,$]=g.split(":"),h=parseInt(I,10),m="AM";h===0?h=12:h===12?m="PM":h>12&&(h-=12,m="PM"),g=`${h}:${$} ${m}`}const i=document.createElement("li");i.textContent=`${r}: ${g}`,i.className="prayer-time-item",e.appendChild(i),console.log(`✅ Added prayer time: ${r}: ${g}`),console.log(`🔍 Prayer list now has ${e.children.length} children`)});const c=document.createElement("li");c.textContent="Jummah: 1:15 PM",c.className="prayer-time-item",e.appendChild(c),console.log("✅ Added Jummah time"),console.log(`🔍 Final prayer list has ${e.children.length} children`),console.log("🔍 Final prayer list HTML:",e.innerHTML)}).catch(t=>{console.error("❌ Prayer times API failed, using fallback:",t);const a=[{name:"Fajr",time:"05:12 AM"},{name:"Dhuhr",time:"01:23 PM"},{name:"Asr",time:"05:07 PM"},{name:"Maghrib",time:"08:34 PM"},{name:"Isha",time:"10:02 PM"}];console.log("🔄 Using fallback prayer times..."),a.forEach(c=>{const r=document.createElement("li");r.textContent=`${c.name}: ${c.time}`,r.className="prayer-time-item",e.appendChild(r),console.log(`✅ Added fallback prayer time: ${c.name}: ${c.time}`)});const s=document.createElement("li");s.textContent="Jummah: 1:15 PM",s.className="prayer-time-item",e.appendChild(s),console.log("✅ Added fallback Jummah time"),console.log(`🔍 Final fallback prayer list has ${e.children.length} children`)})}function E(){console.log("🔍 Rendering QR codes...");const e=document.querySelector(".qr-list");if(console.log("📍 QR list element:",e),e){const o=G();console.log("🖼️ QR image URLs:",o),o&&typeof o=="object"?(e.innerHTML="",Object.entries(o).forEach(([n,t],a)=>{console.log(`📱 Creating QR code ${a+1}:`,n,t);const s=document.createElement("div");s.className="qr-wrapper";const c=document.createElement("div");c.textContent=k[n]||n.replace(/([A-Z])/g," $1").replace(/^./,i=>i.toUpperCase()),c.className="qr-label";const r=document.createElement("img");r.className="qr-img",r.alt=c.textContent,(i=>{const I=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",h=(u=>{switch(u){case"mapWebsite":return"mapitt.png";case"communityWhatsApp":return"whatsapp_group.png";default:return"mapitt.png"}})(i),m=I?[`./images/qr-codes/${h}`,`images/qr-codes/${h}`]:[`/chromecast_stream/images/qr-codes/${h}`,`./images/qr-codes/${h}`];m.unshift(t);let b=0;const M=()=>{if(b<m.length){const u=m[b];console.log(`🔄 Trying QR image path ${b+1}/${m.length}:`,u),r.src=u,b++}else{console.error(`❌ All paths failed for QR image: ${i}`);const u=document.createElement("div");u.textContent=`QR Code: ${k[n]||n}`,u.className="qr-fallback",s.appendChild(u)}};r.onerror=()=>{console.error("❌ Failed to load QR image from path:",r.src),M()},r.onload=()=>{console.log(`✅ QR image loaded successfully: ${r.src}`),console.log("✅ Image element:",r),console.log("✅ Image dimensions:",r.naturalWidth,"x",r.naturalHeight)},M()})(n),console.log(`📸 Created image element for ${n}:`,r),console.log("🔗 Image src set to:",t),s.appendChild(c),s.appendChild(r),e.appendChild(s)}),console.log("✅ QR codes rendered successfully"),console.log("🔍 Final QR list HTML:",e.innerHTML),console.log("🔍 QR list children count:",e.children.length),console.log("🔍 All image elements in QR list:",e.querySelectorAll("img")),e.children.length===0&&(console.warn("⚠️ No QR codes rendered, retrying in 1 second..."),setTimeout(()=>{console.log("🔄 Retrying QR code rendering..."),E()},1e3))):console.error("❌ QR image URLs not available or invalid")}else console.error("❌ QR list element not found")}console.log("🚀 Initializing Chromecast Receiver Demo...");document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("debugBtn");e&&e.addEventListener("click",()=>{console.log("🔍 DEBUG BUTTON CLICKED"),document.body.style.border="10px solid yellow";const o=document.documentElement,n=getComputedStyle(o);console.log("🎨 Current CSS Variables:"),console.log("  - headerHeight:",n.getPropertyValue("--header-height")),console.log("  - contentHeight:",n.getPropertyValue("--content-height")),console.log("  - ayatsHeight:",n.getPropertyValue("--ayats-height")),console.log("  - gap:",n.getPropertyValue("--gap")),console.log("  - padding:",n.getPropertyValue("--padding"));const t=document.querySelector(".prayer-times"),a=document.querySelector(".qr-codes");if(document.querySelector(".slideshow"),t){const i=window.getComputedStyle(t);console.log("📏 Prayer Times Computed Styles:"),console.log("  - height:",i.height),console.log("  - maxHeight:",i.maxHeight),console.log("  - overflow:",i.overflow),console.log("  - padding:",i.padding),console.log("  - margin:",i.margin),console.log("  - display:",i.display),console.log("  - position:",i.position)}if(a){const i=window.getComputedStyle(a);console.log("📏 QR Codes Computed Styles:"),console.log("  - height:",i.height),console.log("  - maxHeight:",i.maxHeight),console.log("  - overflow:",i.overflow),console.log("  - padding:",i.padding),console.log("  - margin:",i.margin),console.log("  - display:",i.display),console.log("  - position:",i.position)}const s=window.matchMedia("(min-width: 1920px)"),c=window.matchMedia("(min-width: 960px) and (max-width: 1200px)");console.log("📺 Media Query (min-width: 1920px):",s.matches),console.log("📺 Media Query (960px-1200px):",c.matches),console.log("📱 Viewport:"),console.log("  - width:",window.innerWidth),console.log("  - height:",window.innerHeight),console.log("💾 Cache Status:");const r=V();r?(console.log("  - GitHub Cache Age:",r.age+" minutes"),console.log("  - GitHub Cache Expires In:",r.expiresIn+" minutes"),console.log("  - GitHub Cache Image Count:",r.imageCount)):console.log("  - GitHub Cache: None");const g=_();g?console.log("  - Local Cache: Available with",g.length,"images"):console.log("  - Local Cache: None"),console.log("  - Available Images:",l.length),console.log("  - Current Image Index:",d)})});console.log("📱 Screen Dimensions:",{width:window.innerWidth,height:window.innerHeight,screenWidth:screen.width,screenHeight:screen.height,devicePixelRatio:window.devicePixelRatio});setTimeout(()=>{const e=document.documentElement,o=getComputedStyle(e);console.log("🎨 CSS Variables Applied:",{headerHeight:o.getPropertyValue("--header-height"),contentHeight:o.getPropertyValue("--content-height"),ayatsHeight:o.getPropertyValue("--ayats-height"),gap:o.getPropertyValue("--gap"),padding:o.getPropertyValue("--padding")});const n=document.querySelector(".prayer-times"),t=document.querySelector(".qr-codes");if(document.querySelector(".slideshow"),n){const a=n.getBoundingClientRect();console.log("📏 Prayer Times Element:",{width:a.width,height:a.height,top:a.top,left:a.left})}if(t){const a=t.getBoundingClientRect();console.log("📏 QR Codes Element:",{width:a.width,height:a.height,top:a.top,left:a.left})}},1e3);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("📄 DOM fully loaded, setting background image..."),Q(),setTimeout(()=>{L(),E()},100)}):(console.log("📄 DOM already loaded, setting background image..."),Q(),setTimeout(()=>{L(),E()},100));X();J();function B(){const e=new Date,o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),n=o-e;console.log("🕛 Scheduling daily reload at midnight"),console.log("⏰ Current time:",e.toLocaleTimeString()),console.log("🌅 Next reload at:",o.toLocaleString()),console.log("⏳ Time until reload:",Math.round(n/1e3/60),"minutes"),setTimeout(()=>{console.log("🔄 Executing scheduled daily reload..."),window.location.reload()},n),setTimeout(()=>{B()},n)}B();console.log("🔧 Cache Management Commands Available:");console.log("  - getCacheInfo() - Check cache status");console.log("  - clearImageCache() - Clear image cache");console.log("  - forceRefreshImages() - Force refresh from GitHub");console.log("  - CACHE_DURATION:",Math.round(S/1e3/60),"minutes");console.log("✅ Initialization complete!");
