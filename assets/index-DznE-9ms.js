(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function $(o){return typeof window<"u"&&window.location.hostname==="itsecretary-map.github.io"?`/chromecast_stream/images/slideshow/${o}`:`./images/slideshow/${o}`}const M=[{ar:"ÿ•ŸêŸÜŸéŸë ÿßŸÑÿµŸéŸëŸÑŸéÿßÿ©Ÿé ÿ™ŸéŸÜŸíŸáŸéŸâŸ∞ ÿπŸéŸÜŸê ÿßŸÑŸíŸÅŸéÿ≠Ÿíÿ¥Ÿéÿßÿ°Ÿê ŸàŸéÿßŸÑŸíŸÖŸèŸÜŸÉŸéÿ±Ÿê",en:"Indeed, prayer prohibits immorality and wrongdoing. (Quran 29:45)"},{ar:"ÿÆŸéŸäŸíÿ±ŸèŸÉŸèŸÖŸí ÿ£Ÿéÿ≠Ÿíÿ≥ŸéŸÜŸèŸÉŸèŸÖŸí ÿ£ŸéÿÆŸíŸÑŸéÿßŸÇŸãÿß",en:"The best among you are those who have the best manners and character. (Bukhari)"},{ar:"ŸÅŸéÿßÿ∞ŸíŸÉŸèÿ±ŸèŸàŸÜŸêŸä ÿ£Ÿéÿ∞ŸíŸÉŸèÿ±ŸíŸÉŸèŸÖŸí",en:"So remember Me; I will remember you. (Quran 2:152)"},{ar:"ŸÖŸéŸÜŸí ŸÑŸéÿß ŸäŸéÿ¥ŸíŸÉŸèÿ±Ÿê ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿé ŸÑŸéÿß ŸäŸéÿ¥ŸíŸÉŸèÿ±Ÿê ÿßŸÑŸÑŸéŸëŸáŸé",en:"Whoever does not thank people has not thanked Allah. (Tirmidhi)"},{ar:"ŸàŸéŸàŸéÿ¨ŸéÿØŸéŸÉŸé ÿ∂ŸéÿßŸÑŸãŸëÿß ŸÅŸéŸáŸéÿØŸéŸâŸ∞",en:"And He found you lost and guided [you]. (Quran 93:7)"},{ar:"ŸÑŸéŸäŸíÿ≥Ÿé ÿßŸÑÿ¥ŸéŸëÿØŸêŸäÿØŸè ÿ®ŸêÿßŸÑÿµŸèŸëÿ±ŸéÿπŸéÿ©Ÿêÿå ÿ•ŸêŸÜŸéŸëŸÖŸéÿß ÿßŸÑÿ¥ŸéŸëÿØŸêŸäÿØŸè ÿßŸÑŸéŸëÿ∞ŸêŸä ŸäŸéŸÖŸíŸÑŸêŸÉŸè ŸÜŸéŸÅŸíÿ≥ŸéŸáŸè ÿπŸêŸÜÿØŸé ÿßŸÑŸíÿ∫Ÿéÿ∂Ÿéÿ®Ÿê",en:"The strong man is not the one who can overpower others. The strong man is the one who controls himself when angry. (Bukhari)"},{ar:"ŸàŸéŸÑŸéÿ≥ŸéŸàŸíŸÅŸé ŸäŸèÿπŸíÿ∑ŸêŸäŸÉŸé ÿ±Ÿéÿ®ŸèŸëŸÉŸé ŸÅŸéÿ™Ÿéÿ±Ÿíÿ∂ŸéŸâŸ∞",en:"And your Lord is going to give you, and you will be satisfied. (Quran 93:5)"},{ar:"ŸäŸéÿ≥ŸêŸëÿ±ŸèŸàÿß ŸàŸéŸÑŸéÿß ÿ™ŸèÿπŸéÿ≥ŸêŸëÿ±ŸèŸàÿß",en:"Make things easy and do not make them difficult. (Bukhari)"},{ar:"ŸàŸéŸÖŸéŸÜ ŸäŸéÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸí ÿπŸéŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê ŸÅŸéŸáŸèŸàŸé ÿ≠Ÿéÿ≥Ÿíÿ®ŸèŸáŸè",en:"And whoever puts his trust in Allah, then He will suffice him. (Quran 65:3)"},{ar:"ŸÑŸéÿß ŸäŸèÿ§ŸíŸÖŸêŸÜŸè ÿ£Ÿéÿ≠ŸéÿØŸèŸÉŸèŸÖŸí ÿ≠Ÿéÿ™ŸéŸëŸâ ŸäŸèÿ≠Ÿêÿ®ŸéŸë ŸÑÿ£ŸéÿÆŸêŸäŸáŸê ŸÖŸéÿß ŸäŸèÿ≠Ÿêÿ®ŸèŸë ŸÑŸêŸÜŸéŸÅŸíÿ≥ŸêŸáŸê",en:"None of you truly believes until he loves for his brother what he loves for himself. (Bukhari & Muslim)"}];function B(){const o=typeof window<"u"&&(window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/")||window.location.href.includes("github.io"));return console.log("üîç GitHub Pages detection:",{hostname:window.location.hostname,pathname:window.location.pathname,href:window.location.href,isGitHubPages:o}),o?{mapWebsite:"/chromecast_stream/images/qr-codes/mapitt.png",communityWhatsApp:"/chromecast_stream/images/qr-codes/whatsapp_group.png"}:{mapWebsite:"./images/qr-codes/mapitt.png",communityWhatsApp:"./images/qr-codes/whatsapp_group.png"}}const E={mapWebsite:"Website",communityWhatsApp:"WhatsApp"},x={owner:"itsecretary-map",repo:"chromecast_stream",folder:"images/slideshow",enabled:!0};function F(){const o=window.innerWidth,e=window.innerHeight;console.log(`üîí Detected screen dimensions: ${o}x${e}`),document.documentElement.style.transform="none",document.body.style.transform="none"}window.addEventListener("load",()=>{console.log("üì± Page loaded, locking viewport dimensions..."),F()});function A(){const o=window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/"),e=["./CCA_5344-HDR.jpg","CCA_5344-HDR.jpg","/CCA_5344-HDR.jpg","../CCA_5344-HDR.jpg"];o&&(e.unshift("/chromecast_stream/CCA_5344-HDR.jpg"),e.unshift("./chromecast_stream/CCA_5344-HDR.jpg")),console.log("üñºÔ∏è  Attempting to load background image from multiple paths:",e),console.log("üìç Current page URL:",window.location.href),console.log("üìÅ Current page pathname:",window.location.pathname);let t=0;const i=new Image;i.onload=()=>{console.log("‚úÖ Background image loaded successfully:",i.src),console.log("üìè Image dimensions:",i.naturalWidth,"x",i.naturalHeight),console.log("üíæ Image size:",(i.naturalWidth*i.naturalHeight*4/1024/1024).toFixed(2),"MB (estimated)"),document.body.style.setProperty("background-image",`url('${i.src}')`,"important"),document.body.style.setProperty("background-size","cover","important"),document.body.style.setProperty("background-position","center center","important"),document.body.style.setProperty("background-attachment","fixed","important"),document.body.style.setProperty("background-repeat","no-repeat","important"),console.log("üé® Background image applied to body element with !important")},i.onerror=()=>{if(console.error(`‚ùå Failed to load background image from path ${t+1}/${e.length}:`,e[t]),t++,t<e.length){const n=e[t];console.log(`üîÑ Trying next path (${t+1}/${e.length}):`,n),i.src=n}else console.error("‚ùå All paths failed. Background image could not be loaded."),console.log("üé® Keeping CSS gradient background as fallback")},console.log(`üöÄ Starting with path: ${e[0]}`),i.src=e[0],fetch(e[0]).then(n=>{n.ok?console.log("‚úÖ Fetch API confirms image is accessible:",e[0]):console.error("‚ùå Fetch API failed:",n.status,n.statusText)}).catch(n=>{console.error("‚ùå Fetch API error:",n)})}let a=[];const I="github_images_cache",D=1440*60*1e3;async function _(){try{const o=localStorage.getItem(I);if(o){const t=JSON.parse(o),i=Date.now();if(i-t.timestamp<D)return console.log("üì¶ Using cached GitHub images (age:",Math.round((i-t.timestamp)/1e3/60),"minutes)"),t.images;console.log("‚è∞ Cache expired, fetching fresh images from GitHub")}const e=await L();if(e.length>0){const t={images:e,timestamp:Date.now()};localStorage.setItem(I,JSON.stringify(t)),console.log("üíæ Cached fresh GitHub images")}return e}catch(o){console.error("‚ùå Error in cache management:",o);const e=localStorage.getItem(I);if(e){const t=JSON.parse(e);return console.log("üîÑ Using expired cache as fallback"),t.images}return[]}}async function L(){try{const o=`https://api.github.com/repos/${x.owner}/${x.repo}/contents/${x.folder}`;console.log("Fetching images from GitHub:",o);const e=await fetch(o);if(!e.ok){if(e.status===404)return console.warn("‚ö†Ô∏è GitHub folder not found:",o),console.log("This is expected if the folder is empty or doesn't exist"),[];throw new Error(`GitHub API error: ${e.status} ${e.statusText}`)}const t=await e.json();console.log("GitHub API response:",t),console.log("üìÅ All files returned from GitHub:",t.map(s=>s.name));const i=t.filter(s=>{const l=s.name.toLowerCase().split(".").pop(),r=["jpg","jpeg","png","gif","webp"].includes(l),h=!s.name.includes("CCA_5344-HDR");return console.log(`üîç File: ${s.name}, isImage: ${r}, isNotBackground: ${h}`),r&&h});console.log(`‚úÖ Found ${i.length} valid slideshow image files:`,i);const n=i.map(s=>({id:s.sha,name:s.name,url:s.download_url}));return console.log("GitHub images processed:",n),n}catch(o){return console.error("Error fetching GitHub images:",o),console.log("Falling back to default slideshow images"),[]}}function k(){localStorage.removeItem(I),console.log("üóëÔ∏è Image cache cleared")}function W(){if(window.location.hostname==="localhost"||window.location.hostname.includes("github.io")||window.innerWidth>=1920||window.innerHeight>=1080){console.log("üì∫ Chromecast Receiver Mode Detected"),console.log("  - Screen size:",window.innerWidth,"x",window.innerHeight),console.log("  - Hostname:",window.location.hostname),G();const e=document.querySelector(".chromecast-controls");e&&(e.style.display="none",console.log("üéØ Hidden Chromecast sender controls for receiver mode"))}else console.log("üíª Sender Mode Detected (showing cast controls)")}function G(){const o=document.body;o.style.fontSize=window.innerWidth>=3840?"32px":"24px";const e=document.querySelector(".slideshow img");e&&(e.style.borderRadius="16px",e.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.6)"),console.log("üé® TV display optimizations applied (CSS-preserving)")}function Q(){const o=window.innerWidth/window.innerHeight;window.innerWidth>=1920&&(console.log(`TV detected: ${window.innerWidth}x${window.innerHeight}, aspect ratio: ${o.toFixed(2)}`),o<=16/9?(document.documentElement.style.setProperty("--header-height","10vh"),document.documentElement.style.setProperty("--ayats-height","10vh"),document.documentElement.style.setProperty("--content-height","70vh"),document.documentElement.style.setProperty("--gap","2vh"),document.documentElement.style.setProperty("--padding","2vh"),console.log("Applied 16:9 TV optimization (percentage-based layout)")):(document.documentElement.style.setProperty("--header-height","8vh"),document.documentElement.style.setProperty("--ayats-height","8vh"),document.documentElement.style.setProperty("--content-height","74vh"),document.documentElement.style.setProperty("--gap","2vh"),document.documentElement.style.setProperty("--padding","2vh"),console.log("Applied ultra-wide TV optimization (percentage-based layout)")))}window.addEventListener("load",Q);window.addEventListener("resize",Q);let c=0;const m=document.getElementById("slideshow-img");let S=0;function p(o){if(a.length===0){console.log("No images available to show");return}console.log(`Showing image ${o+1} of ${a.length}:`,a[o]),m.style.opacity=0;let e=document.getElementById("slideshow-error");e&&e.remove(),setTimeout(()=>{const t=a[o];console.log("Setting image src to:",t),m.src=t,m.onload=()=>{console.log("Image loaded successfully:",t),m.style.opacity=1},m.onerror=()=>{if(console.error("Image failed to load:",t),m.style.opacity=.2,!document.getElementById("slideshow-error")){const i=document.createElement("div");i.id="slideshow-error",i.style.color="red",i.style.textAlign="center",i.style.marginTop="10px",i.textContent="Image failed to load. Check the image URL or try another image.",m.parentNode.appendChild(i)}}},300)}function N(){a.length!==0&&(c===a.length-1&&(S++,console.log(`üîÑ Completed rotation ${S} through ${a.length} images`),V()),c=(c+1)%a.length,p(c))}async function V(){console.log("üîÑ Refreshing slideshow images after completing rotation...");try{k();const o=await L();if(o.length>0){const e=a.length;a=o.map(t=>t.url),console.log(`‚úÖ Refreshed slideshow: ${e} ‚Üí ${a.length} images`),c=0,p(c),a.length>e&&console.log(`üéâ Found ${a.length-e} new images!`)}else console.log("‚ö†Ô∏è No fresh images found, keeping current set")}catch(o){console.error("‚ùå Error refreshing images after rotation:",o),console.log("üîÑ Continuing with current image set")}}async function O(){try{console.log("Initializing slideshow with GitHub images..."),k();const o=await _();o.length>0?(a=o.map(e=>e.url),console.log(`Updated slideshow with ${a.length} images from GitHub`),a.length>0&&(c=0,p(c))):(console.log("No images found in GitHub repository"),a=R(),a.length>0&&(c=0,p(c)))}catch(o){console.error("Error initializing slideshow:",o),a=R(),a.length>0&&(c=0,p(c))}}setInterval(N,1e4);function R(){return[$("imam_schedule.jpg"),$("sundayschool.jpg")]}const P=document.getElementById("ayats-content");let b=0;function T(o){if(P){const t=M[o].en.replace(/[.]+(?=\s*\()/,"");P.innerHTML=`<div style="font-size:1rem;text-align:center;color:white;line-height:1.4;padding:15px;background:rgba(255,255,255,0.1);border-radius:8px;border-left:4px solid #2196F3;">${t}</div>`}}P&&(T(b),setInterval(()=>{b=(b+1)%M.length,T(b)},2e4));const z="15044",U="US",C=document.getElementById("prayer-times-list");fetch(`https://api.aladhan.com/v1/timingsByAddress?address=${z},${U}`).then(o=>o.json()).then(o=>{const e=o.data.timings;["Fajr","Dhuhr","Asr","Maghrib","Isha"].forEach(n=>{let s=e[n];if(s){let[r,h]=s.split(":"),d=parseInt(r,10),u="AM";d===0?d=12:d===12?u="PM":d>12&&(d-=12,u="PM"),s=`${d}:${h} ${u}`}const l=document.createElement("li");l.textContent=`${n}: ${s}`,C.appendChild(l)});const i=document.createElement("li");i.textContent="Jummah: 1:15 PM",C.appendChild(i)}).catch(()=>{[{name:"Fajr",time:"05:12 AM"},{name:"Dhuhr",time:"01:23 PM"},{name:"Asr",time:"05:07 PM"},{name:"Maghrib",time:"08:34 PM"},{name:"Isha",time:"10:02 PM"}].forEach(t=>{let[i,n,s]=t.time.match(/(\d+):(\d+)\s*(AM|PM)/i)||[],l=t.time;i&&n&&s&&(l=`${parseInt(i,10)}:${n} ${s.toUpperCase()}`);const r=document.createElement("li");r.textContent=`${t.name}: ${l}`,C.appendChild(r)});const e=document.createElement("li");e.textContent="Jummah: 1:15 PM",C.appendChild(e)});function H(){console.log("üîç Rendering QR codes...");const o=document.querySelector(".qr-list");if(console.log("üìç QR list element:",o),o){const e=B();console.log("üñºÔ∏è QR image URLs:",e),e&&typeof e=="object"?(o.innerHTML="",Object.entries(e).forEach(([t,i],n)=>{console.log(`üì± Creating QR code ${n+1}:`,t,i);const s=document.createElement("div");s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.marginBottom="18px";const l=document.createElement("div");l.textContent=E[t]||t.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase()),l.style.color="#ffd600",l.style.fontSize="1.1rem",l.style.marginBottom="8px",l.style.textAlign="center",l.style.wordBreak="break-word";const r=document.createElement("img");r.className="qr-img",r.alt=l.textContent,(d=>{const u=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",y=(g=>{switch(g){case"mapWebsite":return"mapitt.png";case"communityWhatsApp":return"whatsapp_group.png";default:return"mapitt.png"}})(d),f=u?[`./images/qr-codes/${y}`,`images/qr-codes/${y}`]:[`/chromecast_stream/images/qr-codes/${y}`,`./images/qr-codes/${y}`];f.unshift(i);let w=0;const v=()=>{if(w<f.length){const g=f[w];console.log(`üîÑ Trying QR image path ${w+1}/${f.length}:`,g),r.src=g,w++}else{console.error(`‚ùå All paths failed for QR image: ${d}`);const g=document.createElement("div");g.textContent=`QR Code: ${E[t]||t}`,g.style.color="#ff6b6b",g.style.fontSize="0.8rem",g.style.textAlign="center",g.style.marginTop="5px",s.appendChild(g)}};r.onerror=()=>{console.error("‚ùå Failed to load QR image from path:",r.src),v()},r.onload=()=>{console.log(`‚úÖ QR image loaded successfully: ${r.src}`),console.log("‚úÖ Image element:",r),console.log("‚úÖ Image dimensions:",r.naturalWidth,"x",r.naturalHeight)},v()})(t),console.log(`üì∏ Created image element for ${t}:`,r),console.log("üîó Image src set to:",i),s.appendChild(l),s.appendChild(r),o.appendChild(s)}),console.log("‚úÖ QR codes rendered successfully"),console.log("üîç Final QR list HTML:",o.innerHTML),console.log("üîç QR list children count:",o.children.length),console.log("üîç All image elements in QR list:",o.querySelectorAll("img")),o.children.length===0&&(console.warn("‚ö†Ô∏è No QR codes rendered, retrying in 1 second..."),setTimeout(()=>{console.log("üîÑ Retrying QR code rendering..."),H()},1e3))):console.error("‚ùå QR image URLs not available or invalid")}else console.error("‚ùå QR list element not found")}console.log("üöÄ Initializing Chromecast Receiver Demo...");document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("debugBtn");o&&o.addEventListener("click",()=>{console.log("üîç DEBUG BUTTON CLICKED"),document.body.style.border="10px solid yellow";const e=document.documentElement,t=getComputedStyle(e);console.log("üé® Current CSS Variables:"),console.log("  - headerHeight:",t.getPropertyValue("--header-height")),console.log("  - contentHeight:",t.getPropertyValue("--content-height")),console.log("  - ayatsHeight:",t.getPropertyValue("--ayats-height")),console.log("  - gap:",t.getPropertyValue("--gap")),console.log("  - padding:",t.getPropertyValue("--padding"));const i=document.querySelector(".prayer-times"),n=document.querySelector(".qr-codes");if(document.querySelector(".slideshow"),i){const r=window.getComputedStyle(i);console.log("üìè Prayer Times Computed Styles:"),console.log("  - height:",r.height),console.log("  - maxHeight:",r.maxHeight),console.log("  - overflow:",r.overflow),console.log("  - padding:",r.padding),console.log("  - margin:",r.margin),console.log("  - display:",r.display),console.log("  - position:",r.position)}if(n){const r=window.getComputedStyle(n);console.log("üìè QR Codes Computed Styles:"),console.log("  - height:",r.height),console.log("  - maxHeight:",r.maxHeight),console.log("  - overflow:",r.overflow),console.log("  - padding:",r.padding),console.log("  - margin:",r.margin),console.log("  - display:",r.display),console.log("  - position:",r.position)}const s=window.matchMedia("(min-width: 1920px)"),l=window.matchMedia("(min-width: 960px) and (max-width: 1200px)");console.log("üì∫ Media Query (min-width: 1920px):",s.matches),console.log("üì∫ Media Query (960px-1200px):",l.matches),console.log("üì± Viewport:"),console.log("  - width:",window.innerWidth),console.log("  - height:",window.innerHeight)})});console.log("üì± Screen Dimensions:",{width:window.innerWidth,height:window.innerHeight,screenWidth:screen.width,screenHeight:screen.height,devicePixelRatio:window.devicePixelRatio});setTimeout(()=>{const o=document.documentElement,e=getComputedStyle(o);console.log("üé® CSS Variables Applied:",{headerHeight:e.getPropertyValue("--header-height"),contentHeight:e.getPropertyValue("--content-height"),ayatsHeight:e.getPropertyValue("--ayats-height"),gap:e.getPropertyValue("--gap"),padding:e.getPropertyValue("--padding")});const t=document.querySelector(".prayer-times"),i=document.querySelector(".qr-codes");if(document.querySelector(".slideshow"),t){const n=t.getBoundingClientRect();console.log("üìè Prayer Times Element:",{width:n.width,height:n.height,top:n.top,left:n.left})}if(i){const n=i.getBoundingClientRect();console.log("üìè QR Codes Element:",{width:n.width,height:n.height,top:n.top,left:n.left})}},1e3);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("üìÑ DOM fully loaded, setting background image..."),A(),setTimeout(()=>{H()},100)}):(console.log("üìÑ DOM already loaded, setting background image..."),A(),setTimeout(()=>{H()},100));O();W();function q(){const o=new Date,e=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1),t=e-o;console.log("üïõ Scheduling daily reload at midnight"),console.log("‚è∞ Current time:",o.toLocaleTimeString()),console.log("üåÖ Next reload at:",e.toLocaleString()),console.log("‚è≥ Time until reload:",Math.round(t/1e3/60),"minutes"),setTimeout(()=>{console.log("üîÑ Executing scheduled daily reload..."),window.location.reload()},t),setTimeout(()=>{q()},t)}q();console.log("üîß Cache Management Commands Available:");console.log("  - getCacheInfo() - Check cache status");console.log("  - clearImageCache() - Clear image cache");console.log("  - forceRefreshImages() - Force refresh from GitHub");console.log("  - CACHE_DURATION:",Math.round(D/1e3/60),"minutes");console.log("‚úÖ Initialization complete!");
